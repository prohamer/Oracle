<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>古文字字體測試 (修正版)</title>
    <style>
        /* 導入甲骨文字型 - 使用完整的相對路徑 */
        @font-face {
            font-family: 'CDPJiagu';
            src: url('./fonts/cdpjiagu.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
        
        /* 導入小篆字型 - 使用完整的相對路徑 */
        @font-face {
            font-family: 'CDPXiaochuan';
            src: url('./fonts/cdpxiaochuan.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
        
        body {
            font-family: "Microsoft JhengHei", "微軟正黑體", sans-serif;
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .test-container {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-item {
            font-size: 24px;
            margin: 20px 0;
            display: flex;
            align-items: center;
        }
        
        /* 甲骨文字型應用 */
        .jiagu {
            font-family: 'CDPJiagu', serif !important;
            font-size: 36px;
            padding: 5px 10px;
            margin: 0 5px;
            background-color: #f5f5f5;
            border-radius: 4px;
            border: 1px dashed #ccc;
        }
        
        /* 小篆字型應用 */
        .xiaochuan {
            font-family: 'CDPXiaochuan', serif !important;
            font-size: 32px;
            padding: 5px 10px;
            margin: 0 5px;
            background-color: #f5f5f5;
            border-radius: 4px;
            border: 1px dashed #ccc;
        }
        
        .font-info {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .instructions {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 40px;
        }
        
        .debug-panel {
            margin-top: 30px;
            padding: 15px;
            background-color: #f0f8ff;
            border: 1px solid #add8e6;
            border-radius: 5px;
        }
        
        .debug-heading {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .debug-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 8px 15px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px 2px;
            cursor: pointer;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>古文字字體測試 (修正版)</h1>
    
    <div class="test-container">
        <div class="test-item">
            甲骨文 <span class="jiagu">月</span> 字
            <div class="font-info">（應使用甲骨文字體顯示「月」字）</div>
        </div>
        
        <div class="test-item">
            小篆 <span class="xiaochuan">月</span> 字
            <div class="font-info">（應使用小篆字體顯示「月」字）</div>
        </div>
    </div>
    
    <div class="debug-panel">
        <div class="debug-heading">字體載入檢測</div>
        <p>如果字體沒有正確顯示，請檢查下列事項：</p>
        <ol>
            <li>確認字體文件是否已上傳到正確目錄（./fonts/cdpjiagu.ttf 和 ./fonts/cdpxiaochuan.ttf）</li>
            <li>檢查瀏覽器控制台是否有字體加載錯誤</li>
            <li>確認字體文件名稱是否正確（區分大小寫）</li>
        </ol>
        <button class="debug-button" onclick="checkFonts()">檢測字體加載狀態</button>
        <div id="fontStatus"></div>
    </div>
    
    <div class="instructions">
        <h2>正確使用說明</h2>
        <p>此頁面測試甲骨文和小篆字體的顯示。確保將以下文件上傳到GitHub:</p>
        <ul>
            <li>此HTML文件 (index.html)</li>
            <li>fonts/ 目錄包含下列文件:
                <ul>
                    <li>cdpjiagu.ttf (甲骨文字體)</li>
                    <li>cdpxiaochuan.ttf (小篆字體)</li>
                </ul>
            </li>
        </ul>
        
        <h3>GitHub Pages 設置</h3>
        <p>確保在GitHub中開啟Pages功能：</p>
        <ol>
            <li>前往存儲庫的「Settings」</li>
            <li>向下滾動至「GitHub Pages」部分</li>
            <li>在「Source」下選擇分支 (通常是 main 或 master)</li>
            <li>點擊「Save」</li>
        </ol>
    </div>
    
    <script>
        function checkFonts() {
            const statusDiv = document.getElementById('fontStatus');
            statusDiv.innerHTML = "<p>正在檢測字體...</p>";
            
            // 檢測CDPJiagu字體
            const checkJiagu = new Promise(resolve => {
                const testElement = document.createElement('span');
                testElement.style.fontFamily = 'CDPJiagu, monospace';
                testElement.style.position = 'absolute';
                testElement.style.visibility = 'hidden';
                testElement.textContent = '月';
                document.body.appendChild(testElement);
                
                // 延遲檢測，等待字體加載
                setTimeout(() => {
                    const defaultWidth = testElement.offsetWidth;
                    testElement.style.fontFamily = 'monospace';
                    const fallbackWidth = testElement.offsetWidth;
                    document.body.removeChild(testElement);
                    
                    resolve(defaultWidth !== fallbackWidth);
                }, 100);
            });
            
            // 檢測CDPXiaochuan字體
            const checkXiaochuan = new Promise(resolve => {
                const testElement = document.createElement('span');
                testElement.style.fontFamily = 'CDPXiaochuan, monospace';
                testElement.style.position = 'absolute';
                testElement.style.visibility = 'hidden';
                testElement.textContent = '月';
                document.body.appendChild(testElement);
                
                // 延遲檢測，等待字體加載
                setTimeout(() => {
                    const defaultWidth = testElement.offsetWidth;
                    testElement.style.fontFamily = 'monospace';
                    const fallbackWidth = testElement.offsetWidth;
                    document.body.removeChild(testElement);
                    
                    resolve(defaultWidth !== fallbackWidth);
                }, 100);
            });
            
            // 檢測字體文件是否存在
            const checkJiaguFile = fetch('./fonts/cdpjiagu.ttf')
                .then(response => response.ok)
                .catch(() => false);
                
            const checkXiaochuanFile = fetch('./fonts/cdpxiaochuan.ttf')
                .then(response => response.ok)
                .catch(() => false);
            
            // 綜合檢測結果
            Promise.all([checkJiagu, checkXiaochuan, checkJiaguFile, checkXiaochuanFile])
                .then(([jiaguLoaded, xiaochuanLoaded, jiaguExists, xiaochuanExists]) => {
                    let html = '<h3>檢測結果</h3>';
                    html += '<ul>';
                    html += `<li>甲骨文字體文件存在: ${jiaguExists ? '✅' : '❌'}</li>`;
                    html += `<li>小篆字體文件存在: ${xiaochuanExists ? '✅' : '❌'}</li>`;
                    html += `<li>甲骨文字體加載: ${jiaguLoaded ? '✅' : '❌'}</li>`;
                    html += `<li>小篆字體加載: ${xiaochuanLoaded ? '✅' : '❌'}</li>`;
                    html += '</ul>';
                    
                    if (!jiaguExists || !xiaochuanExists) {
                        html += '<p><strong>問題：</strong> 字體文件不存在或路徑錯誤。請確保字體文件已正確上傳到 ./fonts/ 目錄。</p>';
                    } else if (!jiaguLoaded || !xiaochuanLoaded) {
                        html += '<p><strong>問題：</strong> 字體文件存在但未正確加載。可能是字體格式問題或瀏覽器兼容性問題。</p>';
                    } else {
                        html += '<p><strong>結果：</strong> 所有字體已正確加載！如果您仍然看不到正確的字體顯示，可能是CSS選擇器問題。</p>';
                    }
                    
                    statusDiv.innerHTML = html;
                });
        }
        
        // 頁面加載後自動檢測
        window.addEventListener('load', () => {
            setTimeout(checkFonts, 1000); // 延遲1秒檢測，確保字體有機會加載
        });
    </script>
</body>
</html>